{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ChehChen\\\\Desktop\\\\student_examples\\\\Project\\\\unit_4\\\\proj4FE\\\\proj4fe\\\\src\\\\components\\\\auth\\\\AuthProvider.jsx\",\n  _s = $RefreshSig$();\nimport { createContext } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport jwt_decode from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AUTH_TOKEN_NAME = 'userAuthToken';\nexport const AuthContext = /*#__PURE__*/createContext({\n  user: null,\n  loginSuccess: userToken => {},\n  logoutSuccess: () => {},\n  getUserFromToken: () => {}\n});\nexport default function AuthProvider(props) {\n  _s();\n  const [cookies, setCookie, removeCookie] = useCookies([AUTH_TOKEN_NAME]);\n  const loginSuccess = userToken => {\n    setCookie(AUTH_TOKEN_NAME, userToken);\n  };\n  const logoutSuccess = () => {\n    removeCookie(AUTH_TOKEN_NAME);\n  };\n  const isAuthenticated = () => {\n    return user !== null;\n  };\n  const getUserFromToken = () => {\n    const {\n      userAuthToken\n    } = cookies;\n    if (userAuthToken) {\n      const decodedToken = jwt_decode(userAuthToken);\n      return decodedToken.user;\n    }\n    return null;\n  };\n  const user = getUserFromToken();\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      loginSuccess,\n      logoutSuccess,\n      getUserFromToken\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n}\n_s(AuthProvider, \"CNPRx2yWTCxM3rIcIUTwJbky37I=\", false, function () {\n  return [useCookies];\n});\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useCookies","jwt_decode","jsxDEV","_jsxDEV","AUTH_TOKEN_NAME","AuthContext","user","loginSuccess","userToken","logoutSuccess","getUserFromToken","AuthProvider","props","_s","cookies","setCookie","removeCookie","isAuthenticated","userAuthToken","decodedToken","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ChehChen/Desktop/student_examples/Project/unit_4/proj4FE/proj4fe/src/components/auth/AuthProvider.jsx"],"sourcesContent":["import { createContext } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nconst AUTH_TOKEN_NAME = 'userAuthToken';\r\n\r\nexport const AuthContext = createContext({\r\n    user: null,\r\n    loginSuccess: (userToken) => { },\r\n    logoutSuccess: () => { },\r\n    getUserFromToken: () => { },\r\n});\r\n\r\nexport default function AuthProvider(props) {\r\n    const [cookies, setCookie, removeCookie] = useCookies([AUTH_TOKEN_NAME]);\r\n\r\n    const loginSuccess = (userToken) => {\r\n        setCookie(AUTH_TOKEN_NAME, userToken);\r\n    };\r\n\r\n    const logoutSuccess = () => {\r\n        removeCookie(AUTH_TOKEN_NAME);\r\n    };\r\n\r\n    const isAuthenticated = () => {\r\n        return user !== null;\r\n    };\r\n\r\n    const getUserFromToken = () => {\r\n        const { userAuthToken } = cookies;\r\n\r\n        if (userAuthToken) {\r\n            const decodedToken = jwt_decode(userAuthToken);\r\n            return decodedToken.user;\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    const user = getUserFromToken();\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, loginSuccess, logoutSuccess, getUserFromToken }}>\r\n            {props.children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n"],"mappings":";;AAAA,SAASA,aAAa,QAAQ,OAAO;AACrC,SAASC,UAAU,QAAQ,cAAc;AACzC,OAAOC,UAAU,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,eAAe,GAAG,eAAe;AAEvC,OAAO,MAAMC,WAAW,gBAAGN,aAAa,CAAC;EACrCO,IAAI,EAAE,IAAI;EACVC,YAAY,EAAGC,SAAS,IAAK,CAAE,CAAC;EAChCC,aAAa,EAAEA,CAAA,KAAM,CAAE,CAAC;EACxBC,gBAAgB,EAAEA,CAAA,KAAM,CAAE;AAC9B,CAAC,CAAC;AAEF,eAAe,SAASC,YAAYA,CAACC,KAAK,EAAE;EAAAC,EAAA;EACxC,MAAM,CAACC,OAAO,EAAEC,SAAS,EAAEC,YAAY,CAAC,GAAGhB,UAAU,CAAC,CAACI,eAAe,CAAC,CAAC;EAExE,MAAMG,YAAY,GAAIC,SAAS,IAAK;IAChCO,SAAS,CAACX,eAAe,EAAEI,SAAS,CAAC;EACzC,CAAC;EAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;IACxBO,YAAY,CAACZ,eAAe,CAAC;EACjC,CAAC;EAED,MAAMa,eAAe,GAAGA,CAAA,KAAM;IAC1B,OAAOX,IAAI,KAAK,IAAI;EACxB,CAAC;EAED,MAAMI,gBAAgB,GAAGA,CAAA,KAAM;IAC3B,MAAM;MAAEQ;IAAc,CAAC,GAAGJ,OAAO;IAEjC,IAAII,aAAa,EAAE;MACf,MAAMC,YAAY,GAAGlB,UAAU,CAACiB,aAAa,CAAC;MAC9C,OAAOC,YAAY,CAACb,IAAI;IAC5B;IAEA,OAAO,IAAI;EACf,CAAC;EAED,MAAMA,IAAI,GAAGI,gBAAgB,CAAC,CAAC;EAE/B,oBACIP,OAAA,CAACE,WAAW,CAACe,QAAQ;IAACC,KAAK,EAAE;MAAEf,IAAI;MAAEC,YAAY;MAAEE,aAAa;MAAEC;IAAiB,CAAE;IAAAY,QAAA,EAChFV,KAAK,CAACU;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACG,CAAC;AAE/B;AAACb,EAAA,CAjCuBF,YAAY;EAAA,QACWX,UAAU;AAAA;AAAA2B,EAAA,GADjChB,YAAY;AAAA,IAAAgB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}